<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DreamNova â€” Devis InstantanÃ©</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0C0A09;
  --bg2: #1C1917;
  --gold: #D4AF37;
  --amber: #F59E0B;
  --green: #10B981;
  --text: #F5F5F4;
  --muted: #A8A29E;
  --border: rgba(245,158,11,0.2);
  --card: rgba(28,25,23,0.9);
  --glass: rgba(255,255,255,0.04);
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh}

/* NAV */
nav{display:flex;align-items:center;gap:8px;padding:16px 32px;background:rgba(12,10,9,0.95);border-bottom:1px solid var(--border);flex-wrap:wrap;position:sticky;top:0;z-index:100;backdrop-filter:blur(12px)}
nav a{color:var(--muted);text-decoration:none;font-size:13px;font-weight:500;padding:6px 12px;border-radius:6px;transition:.2s;white-space:nowrap}
nav a:hover{color:var(--amber);background:rgba(245,158,11,0.1)}
nav a.active{color:var(--amber);background:rgba(245,158,11,0.15)}
.nav-logo{font-family:'Space Grotesk',sans-serif;font-weight:700;font-size:16px;color:var(--gold);margin-right:16px;letter-spacing:.05em}

/* HERO */
.hero{text-align:center;padding:60px 24px 40px;max-width:800px;margin:0 auto}
.hero h1{font-family:'Space Grotesk',sans-serif;font-size:clamp(28px,5vw,48px);font-weight:700;line-height:1.15;background:linear-gradient(135deg,var(--gold),var(--amber),#FCD34D);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:16px}
.hero p{color:var(--muted);font-size:16px;max-width:520px;margin:0 auto 32px;line-height:1.6}
.badge{display:inline-flex;align-items:center;gap:8px;background:rgba(16,185,129,0.1);border:1px solid rgba(16,185,129,0.3);color:var(--green);padding:6px 16px;border-radius:100px;font-size:13px;font-weight:500;margin-bottom:24px}
.badge::before{content:'';width:8px;height:8px;background:var(--green);border-radius:50%;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}

/* CALCULATOR */
.calc-wrap{max-width:780px;margin:0 auto;padding:0 24px 80px}

/* PROGRESS */
.progress-bar{display:flex;align-items:center;justify-content:center;gap:0;margin-bottom:40px}
.step-dot{display:flex;flex-direction:column;align-items:center;gap:8px;position:relative;flex:1;max-width:100px;overflow:visible;pointer-events:none}
.step-dot::after{content:'';position:absolute;top:16px;left:60%;width:80%;height:2px;background:var(--border);z-index:0;pointer-events:none}
.step-dot:last-child::after{display:none}
.dot{pointer-events:none}
.dot{width:32px;height:32px;border-radius:50%;border:2px solid var(--border);background:var(--bg2);display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;color:var(--muted);z-index:1;transition:.3s}
.step-dot.active .dot{border-color:var(--amber);background:rgba(245,158,11,0.15);color:var(--amber)}
.step-dot.done .dot{border-color:var(--green);background:rgba(16,185,129,0.15);color:var(--green)}
.step-label{font-size:11px;color:var(--muted);text-align:center;transition:.3s}
.step-dot.active .step-label{color:var(--amber)}
.step-dot.done .step-label{color:var(--green)}

/* CARD */
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:32px;backdrop-filter:blur(8px);margin-bottom:24px}
.card-title{font-family:'Space Grotesk',sans-serif;font-size:20px;font-weight:600;margin-bottom:8px;color:var(--text)}
.card-sub{color:var(--muted);font-size:14px;margin-bottom:28px;line-height:1.5}

/* OPTIONS GRID */
.options-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin-bottom:24px}
.option-card{border:1px solid var(--border);border-radius:12px;padding:16px;cursor:pointer;transition:.2s;background:var(--glass);position:relative}
.option-card:hover{border-color:rgba(245,158,11,0.4);background:rgba(245,158,11,0.05)}
.option-card.selected{border-color:var(--amber);background:rgba(245,158,11,0.1)}
.option-card.selected::after{content:'âœ“';position:absolute;top:10px;right:12px;color:var(--amber);font-size:14px;font-weight:700}
.option-icon{font-size:24px;margin-bottom:8px}
.option-title{font-weight:600;font-size:14px;margin-bottom:4px}
.option-desc{font-size:12px;color:var(--muted);line-height:1.4}
.option-price{font-size:11px;color:var(--amber);margin-top:6px;font-weight:500}

/* FEATURES MULTI-SELECT */
.features-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px;margin-bottom:24px}
.feature-toggle{border:1px solid var(--border);border-radius:10px;padding:12px;cursor:pointer;transition:.2s;display:flex;align-items:center;gap:10px;background:var(--glass)}
.feature-toggle:hover{border-color:rgba(245,158,11,0.4)}
.feature-toggle.selected{border-color:var(--amber);background:rgba(245,158,11,0.1)}
.feature-toggle .icon{font-size:18px;width:24px;text-align:center}
.feature-toggle .info{flex:1}
.feature-toggle .fname{font-size:13px;font-weight:500}
.feature-toggle .fadd{font-size:11px;color:var(--amber);margin-top:2px}

/* FORM */
.form-group{margin-bottom:20px}
label{display:block;font-size:13px;font-weight:500;color:var(--muted);margin-bottom:8px}
input,textarea,select{width:100%;background:var(--glass);border:1px solid var(--border);border-radius:10px;padding:12px 16px;color:var(--text);font-family:'Inter',sans-serif;font-size:14px;outline:none;transition:.2s}
input:focus,textarea:focus,select:focus{border-color:var(--amber);background:rgba(245,158,11,0.05)}
textarea{resize:vertical;min-height:100px}
select option{background:var(--bg2);color:var(--text)}

/* PRICE DISPLAY */
.price-live{background:linear-gradient(135deg,rgba(212,175,55,0.1),rgba(245,158,11,0.05));border:1px solid rgba(212,175,55,0.3);border-radius:12px;padding:20px 24px;margin-bottom:24px;display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
.price-label{font-size:13px;color:var(--muted)}
.price-amount{font-family:'Space Grotesk',sans-serif;font-size:32px;font-weight:700;color:var(--gold)}
.price-range{font-size:12px;color:var(--muted);margin-top:4px}
.price-tier{display:inline-block;padding:4px 12px;border-radius:100px;font-size:12px;font-weight:600;margin-top:8px}
.tier-petit{background:rgba(16,185,129,0.15);color:var(--green)}
.tier-moyen{background:rgba(245,158,11,0.15);color:var(--amber)}
.tier-grand{background:rgba(139,92,246,0.15);color:#A78BFA}

/* BUTTONS */
.btn-row{display:flex;gap:12px;justify-content:flex-end;flex-wrap:wrap}
.btn{padding:12px 28px;border-radius:10px;border:none;font-family:'Inter',sans-serif;font-size:14px;font-weight:600;cursor:pointer;transition:.2s;text-decoration:none;display:inline-flex;align-items:center;gap:8px}
.btn-primary{background:linear-gradient(135deg,var(--gold),var(--amber));color:#0C0A09}
.btn-primary:hover{opacity:.9;transform:translateY(-1px)}
.btn-secondary{background:var(--glass);border:1px solid var(--border);color:var(--text)}
.btn-secondary:hover{border-color:var(--amber);color:var(--amber)}

/* QUOTE RESULT */
#result-section{display:none}
.quote-card{background:var(--card);border:1px solid rgba(212,175,55,0.4);border-radius:16px;padding:40px;margin-bottom:24px}
.quote-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:32px;flex-wrap:wrap;gap:16px}
.quote-logo{font-family:'Space Grotesk',sans-serif;font-weight:700;font-size:22px;color:var(--gold)}
.quote-meta{text-align:right;font-size:13px;color:var(--muted)}
.quote-title{font-family:'Space Grotesk',sans-serif;font-size:28px;font-weight:700;margin-bottom:8px;color:var(--text)}
.quote-client{font-size:15px;color:var(--muted);margin-bottom:32px}
.quote-divider{border:none;border-top:1px solid var(--border);margin:24px 0}
.line-items{width:100%;border-collapse:collapse;margin-bottom:24px}
.line-items th{text-align:left;font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.05em;padding:8px 0;border-bottom:1px solid var(--border)}
.line-items td{padding:12px 0;font-size:14px;border-bottom:1px solid rgba(255,255,255,0.04)}
.line-items td:last-child,.line-items th:last-child{text-align:right}
.total-row td{font-weight:700;font-size:18px;color:var(--gold);border-bottom:none;padding-top:20px}
.quote-note{font-size:13px;color:var(--muted);line-height:1.6;background:rgba(245,158,11,0.04);border-left:3px solid var(--amber);padding:16px;border-radius:0 8px 8px 0;margin-bottom:24px}
.quote-footer{font-size:12px;color:var(--muted);text-align:center;margin-top:32px}

/* SCORE CARD */
.score-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin-bottom:24px}
.score-item{background:var(--glass);border:1px solid var(--border);border-radius:10px;padding:14px}
.score-item-label{font-size:12px;color:var(--muted);margin-bottom:6px}
.score-item-val{font-size:15px;font-weight:600;color:var(--text)}
.score-item-val.good{color:var(--green)}
.score-item-val.warn{color:var(--amber)}

@media print{
  nav,.btn-row,.btn,.progress-bar,#step1,#step2,#step3,#step4,.calc-info,.hero{display:none!important}
  body{background:#fff;color:#000}
  .quote-card{border:2px solid #D4AF37;box-shadow:none;background:#fff;color:#000}
  .quote-logo,.quote-title,.total-row td{color:#D4AF37}
  .muted,.quote-meta,.line-items th,.quote-footer,.quote-note{color:#666}
  .line-items td{border-color:#eee;color:#333}
  .quote-divider{border-color:#eee}
}
@media(max-width:600px){
  nav{padding:12px 16px}
  .hero{padding:40px 16px 24px}
  .card{padding:20px}
  .options-grid{grid-template-columns:1fr 1fr}
  .features-grid{grid-template-columns:1fr 1fr}
  .price-live{flex-direction:column;gap:8px}
  .btn-row{justify-content:stretch}
  .btn{flex:1;justify-content:center}
}

/* â•â•â• CONTRACT SECTION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.contract-header {
  text-align: center;
  margin-bottom: 2rem;
}

.contract-step-badge {
  display: inline-block;
  padding: 0.3rem 1rem;
  background: rgba(212,175,55,0.1);
  border: 1px solid rgba(212,175,55,0.35);
  border-radius: 20px;
  color: var(--amber);
  font-size: 0.75rem;
  font-weight: 700;
  font-family: 'Space Grotesk', sans-serif;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  margin-bottom: 1rem;
}

.contract-title {
  font-family: 'Space Grotesk', sans-serif;
  font-size: clamp(1.5rem, 3vw, 2rem);
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: var(--text);
}

.contract-sub {
  color: var(--muted);
  font-size: 0.9rem;
}

.contract-card {
  background: var(--card);
  border: 1px solid rgba(212,175,55,0.35);
  border-radius: 16px;
  padding: 2.5rem;
  margin-bottom: 1.5rem;
  backdrop-filter: blur(8px);
}

.contract-logo-row {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
  gap: 1rem;
}

.contract-logo {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--gold);
}

.contract-meta {
  font-size: 0.8rem;
  color: var(--muted);
  text-align: right;
  line-height: 1.6;
}

.contract-parties {
  background: rgba(245,158,11,0.05);
  border: 1px solid rgba(245,158,11,0.15);
  border-radius: 10px;
  padding: 1rem 1.25rem;
  margin-bottom: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
  font-size: 0.875rem;
  color: var(--muted);
}

.contract-parties strong { color: var(--text); }

.cgv-article {
  margin-bottom: 1.25rem;
  padding-bottom: 1.25rem;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}

.cgv-article:last-of-type { border-bottom: none; }

.cgv-title {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 0.85rem;
  font-weight: 700;
  color: var(--gold);
  margin-bottom: 0.6rem;
  letter-spacing: 0.03em;
  text-transform: uppercase;
}

.cgv-article p {
  font-size: 0.84rem;
  color: var(--muted);
  line-height: 1.65;
  margin-bottom: 0.5rem;
}

.cgv-article ul {
  list-style: disc;
  padding-left: 1.5rem;
  margin: 0.5rem 0;
}

.cgv-article ul li {
  font-size: 0.84rem;
  color: var(--muted);
  line-height: 1.6;
  margin-bottom: 0.3rem;
}

.cgv-sign-block {
  background: rgba(16,185,129,0.05);
  border: 1px solid rgba(16,185,129,0.2);
  border-radius: 12px;
  padding: 1.5rem;
  margin-top: 1.5rem;
}

.cgv-check-label {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  font-size: 0.875rem;
  color: var(--text);
  cursor: pointer;
  margin-bottom: 1.25rem;
  line-height: 1.5;
}

.cgv-check-label input[type="checkbox"] {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  accent-color: #10B981;
  margin-top: 2px;
  cursor: pointer;
}

.cgv-signature label {
  display: block;
  font-size: 0.8rem;
  color: var(--muted);
  margin-bottom: 0.5rem;
  font-weight: 500;
}

.cgv-signature input {
  width: 100%;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 8px;
  padding: 10px 14px;
  color: var(--text);
  font-family: 'Inter', sans-serif;
  font-size: 15px;
  font-weight: 600;
  outline: none;
  transition: .2s;
  margin-bottom: 0.5rem;
  font-style: italic;
}

.cgv-signature input:focus {
  border-color: #10B981;
  background: rgba(16,185,129,0.05);
}

.cgv-sign-note {
  font-size: 0.75rem;
  color: var(--muted);
  margin-bottom: 1.25rem;
}

.btn-sign {
  width: 100%;
  padding: 14px 28px;
  background: linear-gradient(135deg, #10B981, #059669);
  color: #fff;
  font-family: 'Space Grotesk', sans-serif;
  font-size: 1rem;
  font-weight: 700;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: .2s;
  letter-spacing: 0.02em;
}

.btn-sign:disabled {
  opacity: 0.35;
  cursor: not-allowed;
}

.btn-sign:not(:disabled):hover {
  opacity: 0.9;
  transform: translateY(-1px);
  box-shadow: 0 8px 24px rgba(16,185,129,0.3);
}

/* â•â•â• PAYMENT SECTION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.payment-amount-bar {
  margin-top: 1rem;
  padding: 0.75rem 1.5rem;
  background: rgba(212,175,55,0.07);
  border: 1px solid rgba(212,175,55,0.2);
  border-radius: 10px;
  font-size: 0.875rem;
  color: var(--muted);
  display: inline-block;
}

.payment-amount-bar strong { color: var(--text); }

.payment-cards {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1.25rem;
  margin-bottom: 2.5rem;
}

@media(max-width:750px) { .payment-cards { grid-template-columns: 1fr; } }

.payment-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 2rem 1.5rem;
  text-align: center;
  transition: .3s;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.75rem;
}

.payment-card:hover {
  border-color: rgba(245,158,11,0.45);
  box-shadow: 0 8px 32px rgba(212,175,55,0.1);
  transform: translateY(-3px);
}

.payment-card-featured {
  border-color: rgba(212,175,55,0.4);
  box-shadow: 0 4px 20px rgba(212,175,55,0.12);
}

.pay-badge {
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  padding: 3px 14px;
  background: linear-gradient(135deg, var(--gold), var(--amber));
  color: #0C0A09;
  font-size: 0.7rem;
  font-weight: 700;
  border-radius: 20px;
  white-space: nowrap;
  font-family: 'Space Grotesk', sans-serif;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.pay-icon {
  font-size: 2.5rem;
  line-height: 1;
}

.pay-name {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 1rem;
  font-weight: 700;
  color: var(--text);
}

.pay-desc {
  font-size: 0.8rem;
  color: var(--muted);
  line-height: 1.5;
  flex: 1;
}

.pay-btn {
  display: block;
  width: 100%;
  padding: 12px 20px;
  border-radius: 10px;
  border: none;
  font-family: 'Space Grotesk', sans-serif;
  font-size: 0.875rem;
  font-weight: 700;
  cursor: pointer;
  text-decoration: none;
  text-align: center;
  transition: .2s;
}

.pay-btn-bank {
  background: rgba(255,255,255,0.06);
  border: 1px solid var(--border);
  color: var(--text);
}

.pay-btn-bank:hover { border-color: var(--amber); color: var(--amber); }

.pay-btn-stripe {
  background: linear-gradient(135deg, var(--gold), var(--amber));
  color: #0C0A09;
}

.pay-btn-stripe:hover { opacity: 0.9; transform: translateY(-1px); }

.pay-btn-paypal {
  background: #003087;
  color: #fff;
}

.pay-btn-paypal:hover { background: #0040b0; }

/* Contact form */
.contact-form-wrap {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 2rem;
  margin-bottom: 2rem;
}

.contact-form-title {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 1rem;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 0.25rem;
}

.contact-form-sub {
  font-size: 0.82rem;
  color: var(--muted);
  margin-bottom: 1.5rem;
}

.cf-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

@media(max-width:600px) { .cf-row { grid-template-columns: 1fr; } }

.cf-group {
  margin-bottom: 1rem;
}

.cf-group label {
  display: block;
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--muted);
  margin-bottom: 6px;
}

.cf-group input,
.cf-group textarea {
  width: 100%;
  background: var(--glass);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 10px 14px;
  color: var(--text);
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  outline: none;
  transition: .2s;
}

.cf-group input:focus,
.cf-group textarea:focus {
  border-color: var(--amber);
  background: rgba(245,158,11,0.05);
}

.cf-group textarea { resize: vertical; min-height: 80px; }

.cf-submit {
  width: 100%;
  padding: 12px 20px;
  background: linear-gradient(135deg, var(--gold), var(--amber));
  color: #0C0A09;
  border: none;
  border-radius: 10px;
  font-family: 'Space Grotesk', sans-serif;
  font-size: 0.9rem;
  font-weight: 700;
  cursor: pointer;
  transition: .2s;
}

.cf-submit:hover { opacity: 0.9; transform: translateY(-1px); }

</style>
</head>
<body>

<nav>
  <span class="nav-logo">â¬¡ DREAM NOVA</span>
  <a href="index.html">ğŸ  Centre</a>
  <a href="ceo-global.html">ğŸ‘‘ CEO Global</a>
  <a href="cto-global.html">âš™ï¸ CTO Global</a>
  <a href="coo-global.html">ğŸ”„ COO Global</a>
  <a href="ceo-pmg.html">ğŸ“Š CEO PMG</a>
  <a href="cto-pmg.html">ğŸ”§ CTO PMG</a>
  <a href="coo-pmg.html">ğŸ“‹ COO PMG</a>
  <a href="devis.html" class="active">ğŸ’° Devis</a>
</nav>

<div class="hero">
  <div class="badge">âš¡ Devis instantanÃ© â€” 0 API â€” 100% autonome</div>
  <h1>Votre Devis en 60 Secondes</h1>
  <p>Calculateur intelligent basÃ© sur la mÃ©thodologie DreamNova. Obtenez une estimation prÃ©cise de votre projet IA & web sans attendre.</p>
</div>

<div class="calc-wrap">

  <!-- Progress -->
  <div class="progress-bar">
    <div class="step-dot active" id="pd1"><div class="dot">1</div><div class="step-label">Projet</div></div>
    <div class="step-dot" id="pd2"><div class="dot">2</div><div class="step-label">FonctionnalitÃ©s</div></div>
    <div class="step-dot" id="pd3"><div class="dot">3</div><div class="step-label">DÃ©lai</div></div>
    <div class="step-dot" id="pd4"><div class="dot">4</div><div class="step-label">Contact</div></div>
    <div class="step-dot" id="pd5"><div class="dot">5</div><div class="step-label">Contrat</div></div>
    <div class="step-dot" id="pd6"><div class="dot">6</div><div class="step-label">Paiement</div></div>
  </div>

  <!-- STEP 1 â€” Type de projet -->
  <div id="step1">
    <div class="card">
      <div class="card-title">Quel type de projet ?</div>
      <div class="card-sub">SÃ©lectionnez la catÃ©gorie qui correspond le mieux Ã  votre besoin</div>
      <div class="options-grid" id="project-types">
        <div class="option-card" data-type="landing" data-base="400" data-days="1" onclick="selectType(this)">
          <div class="option-icon">ğŸš€</div>
          <div class="option-title">Landing Page</div>
          <div class="option-desc">Page de prÃ©sentation, site vitrine simple, page de vente</div>
          <div class="option-price">DÃ¨s 400â‚¬ Â· 24h</div>
        </div>
        <div class="option-card" data-type="ecommerce" data-base="1800" data-days="7" onclick="selectType(this)">
          <div class="option-icon">ğŸ›’</div>
          <div class="option-title">E-commerce</div>
          <div class="option-desc">Boutique en ligne, catalogue produits, paiements intÃ©grÃ©s</div>
          <div class="option-price">DÃ¨s 1 800â‚¬ Â· 1 semaine</div>
        </div>
        <div class="option-card" data-type="saas" data-base="2800" data-days="14" onclick="selectType(this)">
          <div class="option-icon">âš™ï¸</div>
          <div class="option-title">SaaS MVP</div>
          <div class="option-desc">Tableau de bord, authentification, abonnements, BDD</div>
          <div class="option-price">DÃ¨s 2 800â‚¬ Â· 2 semaines</div>
        </div>
        <div class="option-card" data-type="automation" data-base="600" data-days="2" onclick="selectType(this)">
          <div class="option-icon">ğŸ¤–</div>
          <div class="option-title">Automatisation IA</div>
          <div class="option-desc">Scripts, pipelines IA, traitement voix/image, bots</div>
          <div class="option-price">DÃ¨s 600â‚¬ Â· 2 jours</div>
        </div>
        <div class="option-card" data-type="mobile" data-base="3500" data-days="21" onclick="selectType(this)">
          <div class="option-icon">ğŸ“±</div>
          <div class="option-title">App Mobile</div>
          <div class="option-desc">Application iOS/Android, React Native, PWA avancÃ©e</div>
          <div class="option-price">DÃ¨s 3 500â‚¬ Â· 3 semaines</div>
        </div>
        <div class="option-card" data-type="ecosystem" data-base="6000" data-days="45" onclick="selectType(this)">
          <div class="option-icon">ğŸŒ</div>
          <div class="option-title">Ã‰cosystÃ¨me Complet</div>
          <div class="option-desc">Multi-services, intÃ©grations multiples, infrastructure IA</div>
          <div class="option-price">DÃ¨s 6 000â‚¬ Â· 6 semaines+</div>
        </div>
        <div class="option-card" data-type="chatbot" data-base="900" data-days="3" onclick="selectType(this)">
          <div class="option-icon">ğŸ’¬</div>
          <div class="option-title">Chatbot / Agent IA</div>
          <div class="option-desc">Assistant IA personnalisÃ©, RAG sur vos donnÃ©es, multilingue</div>
          <div class="option-price">DÃ¨s 900â‚¬ Â· 3 jours</div>
        </div>
        <div class="option-card" data-type="fix" data-base="150" data-days="0.5" onclick="selectType(this)">
          <div class="option-icon">ğŸ”§</div>
          <div class="option-title">Fix & Optimisation</div>
          <div class="option-desc">Correction bug, optimisation performance, audit Lighthouse</div>
          <div class="option-price">DÃ¨s 150â‚¬ Â· quelques heures</div>
        </div>
      </div>
      <div class="btn-row">
        <button class="btn btn-primary" onclick="goStep(2)">Continuer â†’</button>
      </div>
    </div>
  </div>

  <!-- STEP 2 â€” FonctionnalitÃ©s -->
  <div id="step2" style="display:none">
    <div class="card">
      <div class="card-title">Quelles fonctionnalitÃ©s ?</div>
      <div class="card-sub">SÃ©lectionnez tout ce dont vous avez besoin (plusieurs choix possibles)</div>
      <div class="features-grid">
        <div class="feature-toggle" data-add="400" onclick="toggleFeature(this)"><span class="icon">ğŸ”</span><div class="info"><div class="fname">Authentification</div><div class="fadd">+400â‚¬</div></div></div>
        <div class="feature-toggle" data-add="500" onclick="toggleFeature(this)"><span class="icon">ğŸ’³</span><div class="info"><div class="fname">Paiement en ligne</div><div class="fadd">+500â‚¬</div></div></div>
        <div class="feature-toggle" data-add="350" onclick="toggleFeature(this)"><span class="icon">ğŸ› ï¸</span><div class="info"><div class="fname">Dashboard admin</div><div class="fadd">+350â‚¬</div></div></div>
        <div class="feature-toggle" data-add="250" onclick="toggleFeature(this)"><span class="icon">ğŸŒ</span><div class="info"><div class="fname">Multilingue</div><div class="fadd">+250â‚¬</div></div></div>
        <div class="feature-toggle" data-add="600" onclick="toggleFeature(this)"><span class="icon">ğŸ§ </span><div class="info"><div class="fname">IA / LLM intÃ©grÃ©</div><div class="fadd">+600â‚¬</div></div></div>
        <div class="feature-toggle" data-add="300" onclick="toggleFeature(this)"><span class="icon">ğŸ“</span><div class="info"><div class="fname">CMS / Blog</div><div class="fadd">+300â‚¬</div></div></div>
        <div class="feature-toggle" data-add="350" onclick="toggleFeature(this)"><span class="icon">ğŸ”Œ</span><div class="info"><div class="fname">API externe</div><div class="fadd">+350â‚¬</div></div></div>
        <div class="feature-toggle" data-add="200" onclick="toggleFeature(this)"><span class="icon">ğŸ“Š</span><div class="info"><div class="fname">Analytics avancÃ©s</div><div class="fadd">+200â‚¬</div></div></div>
        <div class="feature-toggle" data-add="400" onclick="toggleFeature(this)"><span class="icon">ğŸ“§</span><div class="info"><div class="fname">Emails transac.</div><div class="fadd">+400â‚¬</div></div></div>
        <div class="feature-toggle" data-add="500" onclick="toggleFeature(this)"><span class="icon">ğŸ—„ï¸</span><div class="info"><div class="fname">Base de donnÃ©es</div><div class="fadd">+500â‚¬</div></div></div>
        <div class="feature-toggle" data-add="450" onclick="toggleFeature(this)"><span class="icon">ğŸ””</span><div class="info"><div class="fname">Notifications push</div><div class="fadd">+450â‚¬</div></div></div>
        <div class="feature-toggle" data-add="300" onclick="toggleFeature(this)"><span class="icon">ğŸ“±</span><div class="info"><div class="fname">PWA / Mobile first</div><div class="fadd">+300â‚¬</div></div></div>
        <div class="feature-toggle" data-add="250" onclick="toggleFeature(this)"><span class="icon">ğŸ”</span><div class="info"><div class="fname">SEO avancÃ©</div><div class="fadd">+250â‚¬</div></div></div>
        <div class="feature-toggle" data-add="350" onclick="toggleFeature(this)"><span class="icon">ğŸ¨</span><div class="info"><div class="fname">Design sur mesure</div><div class="fadd">+350â‚¬</div></div></div>
      </div>

      <div class="price-live">
        <div>
          <div class="price-label">Estimation en cours</div>
          <div class="price-amount" id="live-price">â€”</div>
          <div class="price-range" id="live-range"></div>
          <span class="price-tier" id="live-tier"></span>
        </div>
        <div style="text-align:right">
          <div class="price-label">DÃ©lai estimÃ©</div>
          <div style="font-family:'Space Grotesk',sans-serif;font-size:20px;font-weight:600;color:var(--text)" id="live-delay">â€”</div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-secondary" onclick="goStep(1)">â† Retour</button>
        <button class="btn btn-primary" onclick="goStep(3)">Continuer â†’</button>
      </div>
    </div>
  </div>

  <!-- STEP 3 â€” DÃ©lai & budget -->
  <div id="step3" style="display:none">
    <div class="card">
      <div class="card-title">DÃ©lai & contexte</div>
      <div class="card-sub">Ces informations affinent votre estimation finale</div>

      <div class="form-group">
        <label>Urgence du projet</label>
        <div class="options-grid" style="margin-bottom:0">
          <div class="option-card" data-urgency="1.0" onclick="selectUrgency(this)">
            <div class="option-icon">ğŸŒ¿</div>
            <div class="option-title">Flexible</div>
            <div class="option-desc">Pas de deadline fixe</div>
            <div class="option-price">Tarif standard</div>
          </div>
          <div class="option-card" data-urgency="1.2" onclick="selectUrgency(this)">
            <div class="option-icon">ğŸ“…</div>
            <div class="option-title">Dans 1â€“2 semaines</div>
            <div class="option-desc">Planning raisonnable</div>
            <div class="option-price">+20% rapiditÃ©</div>
          </div>
          <div class="option-card" data-urgency="1.45" onclick="selectUrgency(this)">
            <div class="option-icon">âš¡</div>
            <div class="option-title">Cette semaine</div>
            <div class="option-desc">PrioritÃ© absolue</div>
            <div class="option-price">+45% urgent</div>
          </div>
          <div class="option-card" data-urgency="1.7" onclick="selectUrgency(this)">
            <div class="option-icon">ğŸš¨</div>
            <div class="option-title">Maintenant</div>
            <div class="option-desc">Livraison < 24â€“48h</div>
            <div class="option-price">+70% express</div>
          </div>
        </div>
      </div>

      <div class="form-group" style="margin-top:20px">
        <label>Description courte du projet (optionnel)</label>
        <textarea id="project-desc" placeholder="Ex: Application de gestion des commandes pour une boulangerie, avec paiement CB et notifications SMS..."></textarea>
      </div>

      <div class="price-live">
        <div>
          <div class="price-label">Estimation finale</div>
          <div class="price-amount" id="final-price">â€”</div>
          <span class="price-tier" id="final-tier"></span>
        </div>
        <div style="text-align:right">
          <div class="price-label">DÃ©lai estimÃ©</div>
          <div style="font-family:'Space Grotesk',sans-serif;font-size:20px;font-weight:600;color:var(--text)" id="final-delay">â€”</div>
          <div style="font-size:12px;color:var(--muted);margin-top:4px" id="final-note"></div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-secondary" onclick="goStep(2)">â† Retour</button>
        <button class="btn btn-primary" onclick="goStep(4)">Recevoir le devis â†’</button>
      </div>
    </div>
  </div>

  <!-- STEP 4 â€” Contact -->
  <div id="step4" style="display:none">
    <div class="card">
      <div class="card-title">Vos coordonnÃ©es</div>
      <div class="card-sub">Pour recevoir votre devis dÃ©taillÃ© et Ãªtre contactÃ© par l'Ã©quipe DreamNova</div>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
        <div class="form-group">
          <label>PrÃ©nom *</label>
          <input type="text" id="fname" placeholder="David">
        </div>
        <div class="form-group">
          <label>Nom *</label>
          <input type="text" id="lname" placeholder="Martin">
        </div>
      </div>
      <div class="form-group">
        <label>Email *</label>
        <input type="email" id="email" placeholder="david@entreprise.com">
      </div>
      <div class="form-group">
        <label>WhatsApp / TÃ©lÃ©phone</label>
        <input type="tel" id="phone" placeholder="+33 6 00 00 00 00">
      </div>
      <div class="form-group">
        <label>Entreprise / Projet</label>
        <input type="text" id="company" placeholder="Ma Startup">
      </div>

      <div class="btn-row">
        <button class="btn btn-secondary" onclick="goStep(3)">â† Retour</button>
        <button class="btn btn-primary" onclick="generateQuote()">âœ¨ GÃ©nÃ©rer mon devis</button>
      </div>
    </div>
  </div>

  <!-- RESULT -->
  <div id="result-section">
    <div class="quote-card" id="quote-print">
      <div class="quote-header">
        <div>
          <div class="quote-logo">â¬¡ DREAM NOVA</div>
          <div style="font-size:13px;color:var(--muted);margin-top:4px">SystÃ¨me CEO/CTO/COO Autonome</div>
        </div>
        <div class="quote-meta">
          <div id="q-date"></div>
          <div id="q-ref" style="color:var(--amber);font-weight:600;margin-top:4px"></div>
        </div>
      </div>

      <div class="quote-title" id="q-title"></div>
      <div class="quote-client" id="q-client"></div>

      <hr class="quote-divider">

      <table class="line-items">
        <thead>
          <tr>
            <th>Description</th>
            <th>Montant</th>
          </tr>
        </thead>
        <tbody id="q-lines"></tbody>
        <tfoot>
          <tr class="total-row">
            <td>TOTAL ESTIMÃ‰</td>
            <td id="q-total"></td>
          </tr>
        </tfoot>
      </table>

      <div class="quote-note" id="q-note"></div>

      <div class="score-grid" id="q-scores"></div>

      <hr class="quote-divider">
      <div class="quote-footer">
        DreamNova Â· dreamnovaultimate@gmail.com Â· Jerusalem, IsraÃ«l<br>
        Ce devis est indicatif. Prix dÃ©finitif aprÃ¨s call de dÃ©couverte gratuit (30 min).<br>
        ValiditÃ© : 30 jours Â· Acompte 40% Ã  la signature Â· Solde Ã  la livraison
      </div>
    </div>

    <div class="btn-row">
      <button class="btn btn-secondary" onclick="restart()">â† Nouveau devis</button>
      <button class="btn btn-primary" onclick="window.print()">ğŸ–¨ï¸ Imprimer / Sauvegarder PDF</button>
      <button class="btn btn-primary" onclick="scrollToContract()" style="background:linear-gradient(135deg,#10B981,#059669);color:#fff;">ğŸ“‹ Signer &amp; ProcÃ©der â†’</button>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STEP 5 â€” CONTRACT (CGV + Signature)
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="contract-section" style="display:none">
    <div class="contract-header">
      <div class="contract-step-badge">Ã‰tape 5 â€” Contrat</div>
      <h2 class="contract-title">Conditions GÃ©nÃ©rales de Vente</h2>
      <p class="contract-sub">Lisez attentivement les CGV avant de signer</p>
    </div>

    <div class="contract-card" id="contract-doc">
      <div class="contract-logo-row">
        <div class="contract-logo">â¬¡ DREAM NOVA</div>
        <div class="contract-meta">
          <div>dreamnovaultimate@gmail.com</div>
          <div>Jerusalem, IsraÃ«l Â· RÃ©f : <span id="c-ref"></span></div>
          <div>Date : <span id="c-date"></span></div>
        </div>
      </div>

      <div class="contract-parties">
        <div><strong>Prestataire :</strong> DreamNova (David Amor) â€” dreamnovaultimate@gmail.com â€” Jerusalem, IsraÃ«l</div>
        <div><strong>Client :</strong> <span id="c-client-name"></span> â€” <span id="c-client-email"></span></div>
        <div><strong>Projet :</strong> <span id="c-project"></span></div>
        <div><strong>Montant :</strong> <span id="c-amount"></span></div>
      </div>

      <div class="cgv-article">
        <div class="cgv-title">Article 1 â€” Objet du contrat</div>
        <p>Le prÃ©sent contrat a pour objet de dÃ©finir les conditions dans lesquelles DreamNova (ci-aprÃ¨s "le Prestataire") s'engage Ã  rÃ©aliser pour le Client les services de dÃ©veloppement web, IA et automatisation dÃ©crits dans le devis ci-joint. Les prestations comprennent la conception, le dÃ©veloppement, les tests et la livraison du projet selon le cahier des charges validÃ© par les deux parties.</p>
      </div>

      <div class="cgv-article">
        <div class="cgv-title">Article 2 â€” Prix et modalitÃ©s de paiement</div>
        <p>Le prix total de la prestation est celui indiquÃ© dans le devis acceptÃ©. Le rÃ¨glement s'effectue en deux versements :</p>
        <ul>
          <li><strong>Acompte de 40%</strong> dÃ» Ã  la signature du prÃ©sent contrat et avant tout dÃ©marrage des travaux.</li>
          <li><strong>Solde de 60%</strong> dÃ» Ã  la livraison finale du projet, avant remise des codes sources et accÃ¨s.</li>
        </ul>
        <p>Les paiements sont acceptÃ©s par virement bancaire, Stripe ou PayPal. Tout retard de paiement entraÃ®ne des pÃ©nalitÃ©s de 10% par mois de retard.</p>
      </div>

      <div class="cgv-article">
        <div class="cgv-title">Article 3 â€” DÃ©lais de livraison</div>
        <p>Les dÃ©lais de livraison sont indiquÃ©s dans le devis Ã  titre indicatif et dÃ©marrent Ã  compter de la rÃ©ception de l'acompte et de la validation complÃ¨te du cahier des charges. Le Prestataire s'engage Ã  respecter ces dÃ©lais sauf cas de force majeure ou retards imputables au Client (dÃ©lai de validation, fourniture tardive des contenus/mÃ©dias). En cas de dÃ©passement de dÃ©lai imputable au Prestataire supÃ©rieur Ã  50% du dÃ©lai estimÃ©, le Client pourra demander une rÃ©duction de 5% sur le solde.</p>
      </div>

      <div class="cgv-article">
        <div class="cgv-title">Article 4 â€” PropriÃ©tÃ© intellectuelle</div>
        <p>Le Client devient propriÃ©taire exclusif de l'intÃ©gralitÃ© des droits de propriÃ©tÃ© intellectuelle sur les crÃ©ations rÃ©alisÃ©es dans le cadre de ce contrat (code source, design, textes) <strong>aprÃ¨s rÃ¨glement intÃ©gral du prix</strong>. Avant paiement complet, DreamNova conserve tous droits sur les livrables. Le Prestataire se rÃ©serve le droit de mentionner le projet dans son portfolio, sauf demande Ã©crite de confidentialitÃ© du Client.</p>
      </div>

      <div class="cgv-article">
        <div class="cgv-title">Article 5 â€” ConfidentialitÃ©</div>
        <p>Les parties s'engagent rÃ©ciproquement Ã  garder confidentielles toutes les informations Ã©changÃ©es dans le cadre de ce contrat, qu'elles soient techniques, commerciales ou personnelles. Cette obligation de confidentialitÃ© est valable pendant toute la durÃ©e du contrat et pour une pÃ©riode de 3 ans aprÃ¨s son expiration, sauf accord Ã©crit contraire des parties.</p>
      </div>

      <div class="cgv-article">
        <div class="cgv-title">Article 6 â€” Limitation de responsabilitÃ©</div>
        <p>La responsabilitÃ© de DreamNova est limitÃ©e au montant total de la prestation telle que dÃ©finie dans le devis. Le Prestataire ne saurait Ãªtre tenu responsable des pertes indirectes, pertes de donnÃ©es, pertes de revenus ou prÃ©judices immatÃ©riels consÃ©cutifs Ã  une dÃ©faillance du service. Le Client est responsable des sauvegardes de ses donnÃ©es existantes avant le dÃ©but de l'intervention.</p>
      </div>

      <div class="cgv-article">
        <div class="cgv-title">Article 7 â€” Droit applicable et juridiction</div>
        <p>Le prÃ©sent contrat est soumis au <strong>droit israÃ©lien</strong>. En cas de litige ne pouvant Ãªtre rÃ©solu Ã  l'amiable dans un dÃ©lai de 30 jours, les parties conviennent de soumettre le diffÃ©rend Ã  la juridiction compÃ©tente de <strong>JÃ©rusalem, IsraÃ«l</strong>. Une tentative de mÃ©diation prÃ©alable est fortement encouragÃ©e avant toute action judiciaire.</p>
      </div>

      <div class="cgv-sign-block">
        <label class="cgv-check-label">
          <input type="checkbox" id="cgv-check" onchange="checkSignatureReady()">
          <span>J'ai lu, compris et j'accepte les prÃ©sentes Conditions GÃ©nÃ©rales de Vente</span>
        </label>

        <div class="cgv-signature">
          <label for="cgv-name">Signature Ã©lectronique â€” Entrez votre nom complet :</label>
          <input type="text" id="cgv-name" placeholder="PrÃ©nom Nom" oninput="checkSignatureReady()">
          <div class="cgv-sign-note">En entrant votre nom, vous apposez votre signature Ã©lectronique valant accord contractuel.</div>
        </div>

        <button class="btn-sign" id="btn-sign" disabled onclick="proceedToPayment()">
          Signer et procÃ©der au paiement â†’
        </button>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STEP 6 â€” PAYMENT
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="payment-section" style="display:none">
    <div class="contract-header">
      <div class="contract-step-badge" style="background:rgba(16,185,129,0.15);border-color:rgba(16,185,129,0.4);color:#10B981;">Ã‰tape 6 â€” Paiement</div>
      <h2 class="contract-title">Choisissez votre mode de paiement</h2>
      <p class="contract-sub">Acompte de 40% requis pour dÃ©marrer Â· Solde Ã  la livraison</p>
      <div class="payment-amount-bar">
        Montant total : <strong id="pay-total"></strong> &nbsp;Â·&nbsp;
        Acompte 40% : <strong id="pay-acompte" style="color:#D4AF37"></strong> &nbsp;Â·&nbsp;
        Solde 60% : <strong id="pay-solde"></strong>
      </div>
    </div>

    <div class="payment-cards">
      <!-- Virement bancaire -->
      <div class="payment-card">
        <div class="pay-icon">ğŸ¦</div>
        <div class="pay-name">Virement bancaire</div>
        <div class="pay-desc">Contactez-nous pour recevoir les coordonnÃ©es bancaires. RÃ©ponse sous 2h.</div>
        <a id="pay-virement-link" class="pay-btn pay-btn-bank" href="#">
          Contacter pour virement â†’
        </a>
      </div>

      <!-- Stripe -->
      <div class="payment-card payment-card-featured">
        <div class="pay-badge">RecommandÃ©</div>
        <div class="pay-icon">ğŸ’³</div>
        <div class="pay-name">Paiement par carte</div>
        <div class="pay-desc">Paiement sÃ©curisÃ© Stripe â€” CB, Visa, Mastercard, American Express.</div>
        <button class="pay-btn pay-btn-stripe" onclick="openStripe()">
          Payer par carte â†’
        </button>
      </div>

      <!-- PayPal -->
      <div class="payment-card">
        <div class="pay-icon" style="font-size:2rem">ğŸ…¿</div>
        <div class="pay-name">PayPal</div>
        <div class="pay-desc">Paiement via PayPal â€” compte ou carte bancaire acceptÃ©s.</div>
        <a href="https://paypal.me/DreamNovaJerusalem" target="_blank" class="pay-btn pay-btn-paypal">
          Payer via PayPal â†’
        </a>
      </div>
    </div>

    <!-- Contact form -->
    <div class="contact-form-wrap">
      <div class="contact-form-title">Ou envoyez-nous un message directement</div>
      <p class="contact-form-sub">Votre devis est prÃ©-rempli. Nous vous rÃ©pondons sous 2h ouvrÃ©es.</p>

      <!-- FORMSPREE: Obtenez votre ID sur https://formspree.io â€” remplacez FORMSPREE_ID ci-dessous -->
      <form id="contact-form" class="contact-form" action="https://formspree.io/f/FORMSPREE_ID" method="POST" onsubmit="handleFormSubmit(event)">
        <input type="hidden" name="_subject" id="cf-subject">
        <input type="hidden" name="devis_ref" id="cf-devis-ref">
        <input type="hidden" name="montant_total" id="cf-amount">

        <div class="cf-row">
          <div class="cf-group">
            <label>Votre nom</label>
            <input type="text" name="name" id="cf-name" required placeholder="PrÃ©nom Nom">
          </div>
          <div class="cf-group">
            <label>Email</label>
            <input type="email" name="email" id="cf-email" required placeholder="vous@exemple.com">
          </div>
        </div>

        <div class="cf-group">
          <label>RÃ©fÃ©rence devis</label>
          <input type="text" name="ref" id="cf-ref-display" readonly style="opacity:0.6;cursor:not-allowed">
        </div>

        <div class="cf-group">
          <label>Message</label>
          <textarea name="message" id="cf-message" rows="4" placeholder="DÃ©crivez votre besoin ou posez vos questions..."></textarea>
        </div>

        <button type="submit" class="cf-submit">Envoyer le message â†’</button>
        <div id="cf-success" style="display:none;color:#10B981;font-weight:600;margin-top:12px;text-align:center;">
          Message envoyÃ© ! Nous vous rÃ©pondons sous 2h. Na Nach Nachman MeUman.
        </div>
      </form>
    </div>
  </div>

</div><!-- /calc-wrap -->

<script>
// â”€â”€â”€ PAYMENT CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Stripe live publishable key (admin@holyrentals.com)
const STRIPE_PK = 'pk_live_JbJRtjb23Aujij7TTHOft6jR008MOj8TLY';
// TODO: Replace with a real Payment Link from dashboard.stripe.com/payment-links
const STRIPE_PAYMENT_LINK = 'https://stripe.com'; // PLACEHOLDER â€” create Payment Link on Stripe dashboard

// â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const state = {
  type: null, basePrice: 0, baseDays: 0,
  features: [], featuresTotal: 0,
  urgency: 1.0, urgencyLabel: 'Standard',
  description: ''
};

// â”€â”€â”€ STEP NAVIGATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function goStep(n) {
  if (n === 2 && !state.type) { alert('SÃ©lectionnez un type de projet.'); return; }
  if (n === 3 && state.urgency === null) state.urgency = 1.0;
  [1,2,3,4].forEach(i => {
    document.getElementById('step'+i).style.display = i===n ? 'block' : 'none';
  });
  ['pd1','pd2','pd3','pd4','pd5','pd6'].forEach((id,i) => {
    const el = document.getElementById(id);
    if (!el) return;
    el.classList.remove('active','done');
    if (i+1 === n) el.classList.add('active');
    else if (i+1 < n) el.classList.add('done');
  });
  updateLivePrices();
  window.scrollTo({top:0,behavior:'smooth'});
}

// â”€â”€â”€ TYPE SELECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectType(el) {
  document.querySelectorAll('.option-card').forEach(c => {
    if (c.dataset.type) c.classList.remove('selected');
  });
  el.classList.add('selected');
  state.type = el.dataset.type;
  state.basePrice = parseInt(el.dataset.base);
  state.baseDays = parseFloat(el.dataset.days);
}

// â”€â”€â”€ FEATURES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleFeature(el) {
  el.classList.toggle('selected');
  state.features = [...document.querySelectorAll('.feature-toggle.selected')]
    .map(f => ({ name: f.querySelector('.fname').textContent, add: parseInt(f.dataset.add) }));
  state.featuresTotal = state.features.reduce((s,f) => s+f.add, 0);
  updateLivePrices();
}

// â”€â”€â”€ URGENCY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectUrgency(el) {
  document.querySelectorAll('[data-urgency]').forEach(c => c.classList.remove('selected'));
  el.classList.add('selected');
  state.urgency = parseFloat(el.dataset.urgency);
  state.urgencyLabel = el.querySelector('.option-title').textContent;
  updateLivePrices();
}

// â”€â”€â”€ PRICING ENGINE (100% local, 0 API) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function calcPrice() {
  if (!state.basePrice) return { price: 0, min: 0, max: 0, days: 0, tier: '' };
  const sub = state.basePrice + state.featuresTotal;
  const final = Math.round(sub * state.urgency / 50) * 50;
  const tier = final < 500 ? 'PETIT' : final < 5000 ? 'MOYEN' : 'GRAND';
  const days = Math.ceil(state.baseDays * (state.urgency < 1.2 ? 1 : 0.7));
  return {
    price: final,
    min: Math.round(final * 0.85 / 50) * 50,
    max: Math.round(final * 1.25 / 50) * 50,
    days: days,
    tier: tier,
    tierClass: tier === 'PETIT' ? 'tier-petit' : tier === 'MOYEN' ? 'tier-moyen' : 'tier-grand'
  };
}

function fmtPrice(n) {
  return n.toLocaleString('fr-FR') + ' â‚¬';
}
function fmtDays(d) {
  if (d < 1) return '< 24h';
  if (d === 1) return '1 jour';
  if (d < 7) return d + ' jours';
  if (d < 14) return '1 semaine';
  if (d < 30) return Math.ceil(d/7) + ' semaines';
  return Math.ceil(d/30) + ' mois';
}

function updateLivePrices() {
  const r = calcPrice();
  if (!r.price) return;

  const lp = document.getElementById('live-price');
  const lr = document.getElementById('live-range');
  const lt = document.getElementById('live-tier');
  const ld = document.getElementById('live-delay');
  if (lp) { lp.textContent = fmtPrice(r.price); }
  if (lr) { lr.textContent = 'Fourchette : '+fmtPrice(r.min)+' â€“ '+fmtPrice(r.max); }
  if (lt) { lt.textContent = r.tier; lt.className='price-tier '+r.tierClass; }
  if (ld) { ld.textContent = fmtDays(r.days); }

  const fp = document.getElementById('final-price');
  const ft = document.getElementById('final-tier');
  const fd = document.getElementById('final-delay');
  const fn = document.getElementById('final-note');
  if (fp) { fp.textContent = fmtPrice(r.price); }
  if (ft) { ft.textContent = r.tier; ft.className='price-tier '+r.tierClass; }
  if (fd) { fd.textContent = fmtDays(r.days); }
  if (fn) { fn.textContent = state.urgency > 1.2 ? 'âš¡ SupplÃ©ment urgence inclus' : ''; }
}

// â”€â”€â”€ GENERATE QUOTE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function generateQuote() {
  const fname = document.getElementById('fname').value.trim();
  const lname = document.getElementById('lname').value.trim();
  const email = document.getElementById('email').value.trim();
  if (!fname || !email) { alert('PrÃ©nom et email obligatoires.'); return; }

  const r = calcPrice();
  const desc = document.getElementById('project-desc').value.trim();
  const company = document.getElementById('company').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const ref = 'DN-' + Date.now().toString(36).toUpperCase();
  const now = new Date().toLocaleDateString('fr-FR',{year:'numeric',month:'long',day:'numeric'});

  const typeLabels = {
    landing:'Landing Page','ecommerce':'E-commerce',saas:'SaaS MVP',
    automation:'Automatisation IA',mobile:'App Mobile',
    ecosystem:'Ã‰cosystÃ¨me Complet',chatbot:'Chatbot / Agent IA',fix:'Fix & Optimisation'
  };

  // Fill quote
  document.getElementById('q-date').textContent = now;
  document.getElementById('q-ref').textContent = ref;
  document.getElementById('q-title').textContent = 'Devis â€” ' + (typeLabels[state.type]||state.type);
  document.getElementById('q-client').textContent =
    (fname+' '+lname).trim() + (company ? ' Â· '+company : '') +
    ' Â· '+email + (phone ? ' Â· '+phone : '');

  // Line items
  let lines = `<tr><td>${typeLabels[state.type]||state.type}${desc?'<br><small style="color:var(--muted)">'+desc+'</small>':''}</td><td>${fmtPrice(state.basePrice)}</td></tr>`;
  state.features.forEach(f => {
    lines += `<tr><td>${f.name}</td><td>+${fmtPrice(f.add)}</td></tr>`;
  });
  if (state.urgency > 1.0) {
    const surcharge = Math.round((state.basePrice+state.featuresTotal)*(state.urgency-1)/50)*50;
    lines += `<tr><td>SupplÃ©ment urgence (${state.urgencyLabel})</td><td>+${fmtPrice(surcharge)}</td></tr>`;
  }
  document.getElementById('q-lines').innerHTML = lines;
  document.getElementById('q-total').textContent = fmtPrice(r.price);

  // Note
  const notes = {
    PETIT: 'âœ… Projet classifiÃ© PETIT â€” livrable rapidement. Acompte 40% Ã  la commande, solde Ã  la livraison. Pas de contrat formel requis.',
    MOYEN: 'ğŸ“‹ Projet classifiÃ© MOYEN â€” inclut un point de validation Ã  mi-parcours et un README client complet. Devis dÃ©taillÃ© Ã  signer.',
    GRAND: 'ğŸ¤ Projet classifiÃ© GRAND â€” contrat signÃ© + acompte 40% requis avant dÃ©marrage. Rapports hebdomadaires + handover pack complet.'
  };
  document.getElementById('q-note').textContent = (notes[r.tier]||'') + '\n\nFourchette rÃ©aliste : '+fmtPrice(r.min)+' â€“ '+fmtPrice(r.max)+'. Tarif dÃ©finitif aprÃ¨s dÃ©couverte gratuite (30 min).';

  // Score grid (Cash-First scoring)
  const scores = [
    { label: 'Classification', val: r.tier, cls: r.tierClass.replace('tier-','') },
    { label: 'DÃ©lai estimÃ©', val: fmtDays(r.days), cls: 'good' },
    { label: 'Urgence', val: state.urgencyLabel, cls: state.urgency>1.4?'warn':'good' },
    { label: 'FonctionnalitÃ©s', val: state.features.length + ' option(s)', cls: 'good' },
  ];
  document.getElementById('q-scores').innerHTML = scores.map(s =>
    `<div class="score-item"><div class="score-item-label">${s.label}</div><div class="score-item-val ${s.cls}">${s.val}</div></div>`
  ).join('');

  // Show result
  document.getElementById('step4').style.display = 'none';
  document.getElementById('result-section').style.display = 'block';
  ['pd1','pd2','pd3','pd4'].forEach(id => {
    const el = document.getElementById(id);
    el.classList.remove('active');
    el.classList.add('done');
  });
  window.scrollTo({top:200,behavior:'smooth'});
}

// â”€â”€â”€ ROBUST CLICK BINDING (DOMContentLoaded backup) â”€â”€â”€â”€â”€â”€
document.addEventListener('DOMContentLoaded', () => {
  // Rebind all option-card clicks via addEventListener (more reliable on mobile/touch)
  document.querySelectorAll('.option-card[data-type]').forEach(card => {
    card.style.cursor = 'pointer';
    card.addEventListener('click', function(e) {
      e.stopPropagation();
      selectType(this);
    });
  });
  document.querySelectorAll('[data-urgency]').forEach(card => {
    card.style.cursor = 'pointer';
    card.addEventListener('click', function(e) {
      e.stopPropagation();
      selectUrgency(this);
    });
  });
  document.querySelectorAll('.feature-toggle').forEach(card => {
    card.addEventListener('click', function(e) {
      e.stopPropagation();
      toggleFeature(this);
    });
  });
});

function restart() {
  // Reset state
  state.type=null; state.basePrice=0; state.baseDays=0;
  state.features=[]; state.featuresTotal=0; state.urgency=1.0;
  document.querySelectorAll('.option-card,.feature-toggle').forEach(el=>el.classList.remove('selected'));
  document.querySelectorAll('input,textarea').forEach(el=>el.value='');
  document.getElementById('result-section').style.display='none';
  document.getElementById('contract-section').style.display='none';
  document.getElementById('payment-section').style.display='none';
  document.getElementById('cgv-check').checked = false;
  document.getElementById('btn-sign').disabled = true;
  goStep(1);
}

// â”€â”€â”€ CONTRACT & PAYMENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function scrollToContract() {
  const cs = document.getElementById('contract-section');
  cs.style.display = 'block';
  // Update progress dots
  ['pd1','pd2','pd3','pd4','pd5','pd6'].forEach((id,i) => {
    const el = document.getElementById(id);
    if (!el) return;
    el.classList.remove('active','done');
    if (i === 4) el.classList.add('active');
    else if (i < 4) el.classList.add('done');
  });
  cs.scrollIntoView({behavior:'smooth', block:'start'});
  // Pre-fill contract fields
  const r = calcPrice();
  document.getElementById('c-ref').textContent = document.getElementById('q-ref').textContent;
  document.getElementById('c-date').textContent = document.getElementById('q-date').textContent;
  document.getElementById('c-client-name').textContent = (document.getElementById('fname').value + ' ' + document.getElementById('lname').value).trim();
  document.getElementById('c-client-email').textContent = document.getElementById('email').value;
  document.getElementById('c-project').textContent = document.getElementById('q-title').textContent;
  document.getElementById('c-amount').textContent = fmtPrice(r.price);
}

function checkSignatureReady() {
  const checked = document.getElementById('cgv-check').checked;
  const name = document.getElementById('cgv-name').value.trim();
  const btn = document.getElementById('btn-sign');
  btn.disabled = !(checked && name.length >= 3);
}

function proceedToPayment() {
  const ps = document.getElementById('payment-section');
  ps.style.display = 'block';
  // Update progress dots
  ['pd1','pd2','pd3','pd4','pd5','pd6'].forEach((id,i) => {
    const el = document.getElementById(id);
    if (!el) return;
    el.classList.remove('active','done');
    if (i === 5) el.classList.add('active');
    else if (i < 5) el.classList.add('done');
  });
  ps.scrollIntoView({behavior:'smooth', block:'start'});

  const r = calcPrice();
  const acompte = Math.round(r.price * 0.40 / 10) * 10;
  const solde = r.price - acompte;
  const ref = document.getElementById('q-ref').textContent;
  const name = (document.getElementById('fname').value + ' ' + document.getElementById('lname').value).trim();
  const email = document.getElementById('email').value;

  document.getElementById('pay-total').textContent = fmtPrice(r.price);
  document.getElementById('pay-acompte').textContent = fmtPrice(acompte);
  document.getElementById('pay-solde').textContent = fmtPrice(solde);

  // Pre-fill contact form
  document.getElementById('cf-name').value = name;
  document.getElementById('cf-email').value = email;
  document.getElementById('cf-ref-display').value = ref;
  document.getElementById('cf-devis-ref').value = ref;
  document.getElementById('cf-amount').value = fmtPrice(r.price);
  document.getElementById('cf-subject').value = '[DEVIS ' + ref + '] ' + name + ' â€” ' + fmtPrice(r.price);
  document.getElementById('cf-message').value = 'Bonjour,\n\nJe souhaite procÃ©der au paiement du devis ' + ref + ' d'un montant de ' + fmtPrice(r.price) + '.\nAcompte 40% : ' + fmtPrice(acompte) + '\n\nMerci de confirmer les modalitÃ©s de paiement.';

  // Virement mailto link
  const subject = encodeURIComponent('[PAIEMENT] Devis ' + ref + ' â€” ' + fmtPrice(r.price));
  const body = encodeURIComponent('Bonjour,\n\nJe souhaite procÃ©der au paiement du devis ' + ref + '.\n\nMontant total : ' + fmtPrice(r.price) + '\nAcompte 40% : ' + fmtPrice(acompte) + '\n\nMerci de m\'envoyer les coordonnÃ©es bancaires.\n\n' + name);
  document.getElementById('pay-virement-link').href = 'mailto:dreamnovaultimate@gmail.com?subject=' + subject + '&body=' + body;
}

function openStripe() {
  if (STRIPE_PAYMENT_LINK === 'https://stripe.com' || STRIPE_PAYMENT_LINK.includes('placeholder')) {
    alert('Paiement par carte : lien Stripe non encore configurÃ©.\nContactez-nous directement Ã  dreamnovaultimate@gmail.com pour procÃ©der au paiement.');
    return;
  }
  window.open(STRIPE_PAYMENT_LINK, '_blank');
}

function handleFormSubmit(e) {
  // Check if Formspree ID is configured
  const form = document.getElementById('contact-form');
  if (form.action.includes('FORMSPREE_ID')) {
    e.preventDefault();
    alert('Formulaire non configurÃ©.\nEnvoyez votre message directement Ã  : dreamnovaultimate@gmail.com');
    return;
  }
  // Let Formspree handle it via fetch for better UX
  e.preventDefault();
  const data = new FormData(form);
  fetch(form.action, {
    method: 'POST',
    body: data,
    headers: { 'Accept': 'application/json' }
  }).then(r => {
    if (r.ok) {
      document.getElementById('cf-success').style.display = 'block';
      form.reset();
    } else {
      alert('Erreur envoi. Contactez directement : dreamnovaultimate@gmail.com');
    }
  }).catch(() => {
    alert('Erreur rÃ©seau. Contactez directement : dreamnovaultimate@gmail.com');
  });
}

</script>
</body>
</html>
